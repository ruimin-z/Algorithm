# [454. 4Sum II](https://leetcode.com/problems/4sum-ii/description/)

![Difficulty](https://img.shields.io/badge/Difficulty-Medium-orange)
![Tag](https://img.shields.io/badge/Tag-Hash%20Table-lightgrey)


---

## ğŸ“ Description

> Given four integer arrays nums1, nums2, nums3, and nums4 all of length n, 
> return the number of tuples (i, j, k, l) such that:
> 
> 0 <= i, j, k, l < n
> 
> nums1[i] + nums2[j] + nums3[k] + nums4[l] == 0


## ğŸ“šSimilar Questions
[1.TwoSum](1.TwoSum.md), [15.3Sum](15.3Sum.md), [18.4Sum](18.4Sum.md), 454.4SumII

[ä»£ç éšæƒ³å½•](https://programmercarl.com/0454.%E5%9B%9B%E6%95%B0%E7%9B%B8%E5%8A%A0II.html#%E7%AE%97%E6%B3%95%E5%85%AC%E5%BC%80%E8%AF%BE):

`å››æ•°ç›¸åŠ `åŒºåˆ«äº`å››æ•°ä¹‹å’Œ`ï¼š
å››æ•°ä¹‹å’Œæ˜¯ä¸€ä¸ªæ•°ç»„é‡Œæ‰¾å››ä¸ªæ•°ï¼Œè€Œéæ­¤é¢˜ï¼ˆå››æ•°ç›¸åŠ ï¼‰çš„å››ä¸ªæ•°ç»„æ‰¾å››ä¸ªæ•°ï¼Œå››æ•°ä¹‹å’Œéœ€è¦è€ƒè™‘å»é‡ã€‚


```text
æœ¬é¢˜æ˜¯ä½¿ç”¨å“ˆå¸Œæ³•çš„ç»å…¸é¢˜ç›®ï¼Œè€Œ15.ä¸‰æ•°ä¹‹å’Œï¼Œ18.å››æ•°ä¹‹å’Œå¹¶ä¸åˆé€‚ä½¿ç”¨å“ˆå¸Œæ³•ï¼Œ
å› ä¸ºä¸‰æ•°ä¹‹å’Œå’Œå››æ•°ä¹‹å’Œè¿™ä¸¤é“é¢˜ç›®ä½¿ç”¨å“ˆå¸Œæ³•åœ¨ä¸è¶…æ—¶çš„æƒ…å†µä¸‹åšåˆ°å¯¹ç»“æœå»é‡æ˜¯å¾ˆå›°éš¾çš„ï¼Œ
å¾ˆæœ‰å¤šç»†èŠ‚éœ€è¦å¤„ç†ã€‚

è€Œè¿™é“é¢˜ç›®æ˜¯å››ä¸ªç‹¬ç«‹çš„æ•°ç»„ï¼Œåªè¦æ‰¾åˆ°A[i] + B[j] + C[k] + D[l] = 0å°±å¯ä»¥ï¼Œ
ä¸ç”¨è€ƒè™‘æœ‰é‡å¤çš„å››ä¸ªå…ƒç´ ç›¸åŠ ç­‰äº0çš„æƒ…å†µï¼Œ
æ‰€ä»¥ç›¸å¯¹äºé¢˜ç›®18. å››æ•°ä¹‹å’Œï¼Œé¢˜ç›®15.ä¸‰æ•°ä¹‹å’Œï¼Œè¿˜æ˜¯ç®€å•äº†ä¸å°‘ï¼

```

---

## ğŸ’¡ Solution

### Logic 

1. Return an integer (number of tuples)

2. Convert 4 arrays to 2 arrays, which changed the question to [1.TwoSum](./1.TwoSum.md).

```text
A = [a1 a2 a3 ... an]

B = [b1 b2 b3 ... bm]

C = [c1 c2 c3 ... ck]

D = [d1 d2 d3 ... dl]


becomes

A+B = [a1+b1, a1+b2, ... a1+bm, a2+b1, ... an+bm]

C+D = [c1+d1, c1+d2, ... c1+dl, c2+d1, ... ck+dl]
```



3. Because we return the index, we need to use map.
   
    key is the sum, value is the number of sum occurrences.

### Complexity Analysis

- Timeï¼š`O(n^2)`
- Spaceï¼š`O(n^2)`
The sum_map dictionary stores sums of `nums1[i] + nums2[j]` for all index i and j (n^2 elements)

---
## ğŸ” Code

```python
from collections import defaultdict
from typing import List

def fourSumCount(self, nums1: List[int], nums2: List[int], nums3: List[int], nums4: List[int]) -> int:
    sum_map = defaultdict(int)
    for a in nums1:
        for b in nums2:
            sum_map[a+b] += 1
    count = 0
    for c in nums3:
        for d in nums4:
            count += sum_map[-c-d]
    return count
```

- [defaultdict()](https://docs.python.org/3/library/collections.html#collections.defaultdict) æ‹¬å·ä¸€å®šè¦æœ‰type
  - defaultdict(int), defaultdict(lambda : 0)
- ä½¿ç”¨defaultdictå°±ä¸ç”¨check `-c-d` æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ç›´æ¥è·å–